// http://geoexamples.com/d3-composite-projections/ v1.4.0 Copyright 2023 Roger Veciana i Rovira
!function(n,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("d3-geo"),require("d3-path")):"function"==typeof define&&define.amd?define(["exports","d3-geo","d3-path"],t):t((n="undefined"!=typeof globalThis?globalThis:n||self).d3=n.d3||{},n.d3,n.d3)}(this,(function(n,t,e){"use strict";var r=1e-6;function o(){}var i=1/0,a=i,l=-i,u=l,s={point:function(n,t){n<i&&(i=n);n>l&&(l=n);t<a&&(a=t);t>u&&(u=t)},lineStart:o,lineEnd:o,polygonStart:o,polygonEnd:o,result:function(){var n=[[i,a],[l,u]];return l=u=-(a=i=1/0),n}};function c(n,e,r){var o=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=n.clipExtent&&n.clipExtent();n.scale(150).translate([0,0]),null!=a&&n.clipExtent(null),t.geoStream(r,n.stream(s));var l=s.result(),u=Math.min(o/(l[1][0]-l[0][0]),i/(l[1][1]-l[0][1])),c=+e[0][0]+(o-u*(l[1][0]+l[0][0]))/2,f=+e[0][1]+(i-u*(l[1][1]+l[0][1]))/2;return null!=a&&n.clipExtent(a),n.scale(150*u).translate([c,f])}n.geoAlbersUk=function(){var n,o,i,a,l,u=t.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),s=t.geoAlbers().rotate([4.4,.8]).center([0,55.4]).parallels([50,60]),f={point:function(n,t){l=[n,t]}};function p(n){var t=n[0],e=n[1];return l=null,i.point(t,e),l||(a.point(t,e),l)}function d(){return n=o=null,p}return p.invert=function(n){var t=u.scale(),e=u.translate(),r=(n[0]-e[0])/t,o=(n[1]-e[1])/t;return(o>=-.089&&o<.06&&r>=.029&&r<.046?s:u).invert(n)},p.stream=function(t){return n&&o===t?n:(e=[u.stream(o=t),s.stream(t)],r=e.length,n={point:function(n,t){for(var o=-1;++o<r;)e[o].point(n,t)},sphere:function(){for(var n=-1;++n<r;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<r;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<r;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<r;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<r;)e[n].polygonEnd()}});var e,r},p.precision=function(n){return arguments.length?(u.precision(n),s.precision(n),d()):u.precision()},p.scale=function(n){return arguments.length?(u.scale(n),s.scale(n),p.translate(u.translate())):u.scale()},p.translate=function(n){if(!arguments.length)return u.translate();var t=u.scale(),e=+n[0],o=+n[1];return i=u.translate(n).clipExtent([[e-.065*t,o-.089*t],[e+.075*t,o+.089*t]]).stream(f),a=s.translate([e+.01*t,o+.025*t]).clipExtent([[e+.029*t+r,o-.089*t+r],[e+.046*t-r,o-.06*t-r]]).stream(f),d()},p.fitExtent=function(n,t){return c(p,n,t)},p.fitSize=function(n,t){return function(n,t,e){return c(n,[[0,0],t],e)}(p,n,t)},p.drawCompositionBorders=function(n){var t,e,r,o;t=u([-1.113205870242365,59.64920050773357]),e=u([.807899092399606,59.59085836472269]),r=u([.5778611961420386,57.93467822832577]),o=u([-1.25867782078448,57.99029450085142]),n.moveTo(t[0],t[1]),n.lineTo(e[0],e[1]),n.lineTo(r[0],r[1]),n.lineTo(o[0],o[1]),n.closePath()},p.getCompositionBorders=function(){var n=e.path();return this.drawCompositionBorders(n),n.toString()},p.scale(2800)}}));
